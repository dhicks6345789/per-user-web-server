<VirtualHost *:80>
  DocumentRoot "/usr/local/apache2/htdocs"
  ServerName users

  # Write access logs to the standard output (STDOUT) - where they should go when running inside a container.
  CustomLog /proc/self/fd/1 common
  # We also Write to a file inside the container so we can share those logs with the host, which can then share with other containers so end users can see logged error messages from CGI scripts.
  CustomLog /usr/local/apache2/logs/access.log combined

  <Directory "/usr/local/apache2/htdocs">
    # Enable .py CGI scripts.
    AddHandler cgi-script .py
    DirectoryIndex index.py
    Options Indexes FollowSymLinks ExecCGI
    AllowOverride None
    Require all granted
  </Directory>

  UserDir ./
  UserDir disabled root

  <Directory "/usr/local/apache2/htdocs/*">
    # Enable .py CGI scripts.
    AddHandler cgi-script .py
    DirectoryIndex index.py index.html
    Options Indexes FollowSymLinks ExecCGI
    AllowOverride None
    Require all granted
  </Directory>
</VirtualHost>
