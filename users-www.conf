<VirtualHost *:80>
  DocumentRoot "/usr/local/apache2/htdocs"
  ServerName users

  # Write access logs to the standard output (STDOUT) - where they should go when running inside a container.
  CustomLog /proc/self/fd/1 common

  # 2. We also Write to a file inside the container so we can share those logs with the host.
  CustomLog /usr/local/apache2/logs/access.log combined

  # We want to do the same for the errors logs, but Apache's ErrorLog directive usually only supports one destination.
  # To log errors to two places, we use a pipe to the "tee" command.
  ErrorLog "|/usr/bin/tee -a /usr/local/apache2/logs/error.log /proc/self/fd/2"

  <Directory "/usr/local/apache2/htdocs">
    # Enable .py CGI scripts.
    AddHandler cgi-script .py
    DirectoryIndex index.py
    Options Indexes FollowSymLinks ExecCGI
    AllowOverride None
    Require all granted
  </Directory>

  UserDir ./
  UserDir disabled root

  <Directory "/usr/local/apache2/htdocs/*">
    # Enable .py CGI scripts.
    AddHandler cgi-script .py
    DirectoryIndex index.py index.html
    Options Indexes FollowSymLinks ExecCGI
    AllowOverride None
    Require all granted
  </Directory>
</VirtualHost>
